{
    "sourceFile": "src/views/Gen/Gen.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1653986247632,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1653986253422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,14 +121,14 @@\n         :total=\"data.totalRows\"\r\n         @current-change=\"handleCurrentChange\"\r\n         @size-change=\"handleSizeChange\"\r\n     />\r\n-    <add ref=\"add\" :all-roles=\"allRoles\" @fetch-data=\"getData\" />\r\n+    <!-- <add ref=\"add\" :all-roles=\"allRoles\" @fetch-data=\"getData\" /> -->\r\n   </div>\r\n \r\n </template>\r\n <script>\r\n-import Add from \"./Components/add\";\r\n+// import Add from \"./Components/add\";\r\n import {allList} from \"@/api/system/gen/gen\";\r\n export default {\r\n   components: {\r\n     // eslint-disable-next-line vue/no-unused-components\r\n"
                },
                {
                    "date": 1653986280193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,19 +121,19 @@\n         :total=\"data.totalRows\"\r\n         @current-change=\"handleCurrentChange\"\r\n         @size-change=\"handleSizeChange\"\r\n     />\r\n-    <!-- <add ref=\"add\" :all-roles=\"allRoles\" @fetch-data=\"getData\" /> -->\r\n+    <add ref=\"add\" :all-roles=\"allRoles\" @fetch-data=\"getData\" />\r\n   </div>\r\n \r\n </template>\r\n <script>\r\n-// import Add from \"./Components/add\";\r\n+import Add from \"./Components/add\";\r\n import {allList} from \"@/api/system/gen/gen\";\r\n export default {\r\n   components: {\r\n     // eslint-disable-next-line vue/no-unused-components\r\n-      // Add,\r\n+      Add,\r\n   },\r\n   // eslint-disable-next-line vue/multi-word-component-names\r\n   name: \"Gen\",\r\n   data() {\r\n"
                }
            ],
            "date": 1653986247632,
            "name": "Commit-0",
            "content": "<template>\r\n  <div ref=\"custom-table\"\r\n       class=\"custom-table-container\"\r\n       :class=\"{ 'vab-fullscreen': isFullscreen }\"\r\n  >\r\n    <vab-query-form>\r\n      <vab-query-form-left-panel :span=\"24\">\r\n        <el-form :inline=\"true\" label-width=\"80px\" @submit.native.prevent>\r\n          <el-form-item label=\"表名\">\r\n            <el-input\r\n                v-model=\"data.tableName\"\r\n                clearable\r\n                placeholder=\"请输入表名\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"queryData\">\r\n              查询\r\n            </el-button>\r\n            <el-button icon=\"el-icon-refresh\" @click=\"clear\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </vab-query-form-left-panel>\r\n      <vab-query-form-right-panel :span=\"24\">\r\n        <div class=\"stripe-panel\">\r\n          <el-checkbox v-model=\"stripe\">斑马纹</el-checkbox>\r\n        </div>\r\n        <div class=\"border-panel\">\r\n          <el-checkbox v-model=\"border\">边框（可拉伸列）</el-checkbox>\r\n        </div>\r\n        <el-button\r\n            style=\"margin: 0 10px 10px 0 !important\"\r\n            type=\"primary\"\r\n            @click=\"clickFullScreen\"\r\n        >\r\n          <vab-icon\r\n              :icon=\"isFullscreen ? 'fullscreen-exit-fill' : 'fullscreen-fill'\"\r\n          />\r\n          表格全屏\r\n        </el-button>\r\n        <el-popover\r\n            ref=\"popover\"\r\n            popper-class=\"custom-table-checkbox\"\r\n            trigger=\"hover\"\r\n        >\r\n          <el-radio-group v-model=\"lineHeight\">\r\n            <el-radio label=\"medium\">大</el-radio>\r\n            <el-radio label=\"small\">中</el-radio>\r\n            <el-radio label=\"mini\">小</el-radio>\r\n          </el-radio-group>\r\n          <template #reference>\r\n            <el-button style=\"margin: 0 10px 10px 0 !important\" type=\"primary\">\r\n              <vab-icon icon=\"line-height\"/>\r\n              表格尺寸\r\n            </el-button>\r\n          </template>\r\n        </el-popover>\r\n<!--        <el-popover popper-class=\"custom-table-checkbox\" trigger=\"hover\">-->\r\n<!--          <el-checkbox-group v-model=\"checkList\">-->\r\n<!--            <vab-draggable v-bind=\"dragOptions\" :list=\"columns\">-->\r\n<!--              <div v-for=\"(item, index) in columns\" :key=\"item + index\">-->\r\n<!--                <vab-icon icon=\"drag-drop-line\"/>-->\r\n<!--                <el-checkbox-->\r\n<!--                    :disabled=\"item.disableCheck === true\"-->\r\n<!--                    :label=\"item.label\"-->\r\n<!--                >-->\r\n<!--                  {{ item.label }}-->\r\n<!--                </el-checkbox>-->\r\n<!--              </div>-->\r\n<!--            </vab-draggable>-->\r\n<!--          </el-checkbox-group>-->\r\n<!--          <template #reference>-->\r\n<!--            <el-button-->\r\n<!--                icon=\"el-icon-setting\"-->\r\n<!--                style=\"margin: 0 0 10px 0 !important\"-->\r\n<!--                type=\"primary\"-->\r\n<!--            >-->\r\n<!--              列设置-->\r\n<!--            </el-button>-->\r\n<!--          </template>-->\r\n<!--        </el-popover>-->\r\n      </vab-query-form-right-panel>\r\n    </vab-query-form>\r\n\r\n    <el-table\r\n        v-loading=\"listLoading\"\r\n        :border=\"border\"\r\n        @selection-change=\"setSelectRows\"\r\n        :data=\"tableData\"\r\n        :height=\"250\"\r\n        style=\"width: 100%\"\r\n        :stripe=\"stripe\"\r\n        :size=\"lineHeight\"\r\n    >\r\n      <el-table-column align=\"center\" type=\"selection\" width=\"55\"/>\r\n      <el-table-column\r\n          align=\"center\"\r\n          prop=\"remarks\"\r\n          label=\"评论\"\r\n          width=\"180\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"tableName\" label=\"表名\" width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"createTime\" label=\"创建时间\">\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" @click=\"allAdd(scope.row)\">编辑</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-pagination\r\n        background\r\n        align=\"center\"\r\n        :current-page.sync=\"data.currentPage\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :page-size=\"data.pageSize\"\r\n        :page-sizes=\"[10, 20, 30, 50]\"\r\n        :total=\"data.totalRows\"\r\n        @current-change=\"handleCurrentChange\"\r\n        @size-change=\"handleSizeChange\"\r\n    />\r\n    <add ref=\"add\" :all-roles=\"allRoles\" @fetch-data=\"getData\" />\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport Add from \"./Components/add\";\r\nimport {allList} from \"@/api/system/gen/gen\";\r\nexport default {\r\n  components: {\r\n    // eslint-disable-next-line vue/no-unused-components\r\n      // Add,\r\n  },\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: \"Gen\",\r\n  data() {\r\n    return {\r\n      stripe: false,\r\n      lineHeight: 'small',\r\n      isFullscreen: false,\r\n      tableData: [],\r\n      height:'250',\r\n      allRoles: [],\r\n      data: {\r\n        tableName: \"\",\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        totalRows: 0,\r\n      },\r\n      listLoading: true,\r\n      border: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    clickFullScreen() {\r\n      this.isFullscreen = !this.isFullscreen\r\n      this.handleHeight()\r\n    },\r\n\r\n    handleHeight() {\r\n      if (this.isFullscreen) this.height = this.$baseTableHeight(1) + 210\r\n      else this.height = this.$baseTableHeight(1)\r\n    },\r\n    // 搜索\r\n    queryData() {\r\n      this.getData()\r\n    },\r\n    clear() {\r\n      this.tableName = ''\r\n      this.getData()\r\n    },\r\n    getData() {\r\n      const data = JSON.parse(JSON.stringify(this.data));\r\n      this.listLoading = true;\r\n      allList(data).then((response) => {\r\n        console.log(response);\r\n        if (response.code == '200') {\r\n          this.tableData = response.data.content;\r\n          this.data.totalRows = response.data.totalElements;\r\n          this.listLoading = false;\r\n        } else if (response.code == '403') {\r\n          this.$message.error(\"无权限\")\r\n        }\r\n      });\r\n    },\r\n    handleSizeChange(val) {\r\n      this.data.pageSize = val;\r\n      this.getData();\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.data.currentPage = val;\r\n      this.getData();\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n    setSelectRows(val) {\r\n      this.selectRows = val;\r\n    },\r\n    allAdd(row) {\r\n      console.log(\"row\",row);\r\n      this.$refs['add'].showEdit(row)\r\n    },\r\n  },\r\n};\r\n</script>\r\n//\r\n// .custom-table-container {\r\n//     ::v-deep {\r\n//       i {\r\n//         cursor: pointer;\r\n//       }\r\n//       .stripe-panel,\r\n//     .border-panel {\r\n//       margin: 0 10px 10px !important;\r\n//     }\r\n//     }\r\n\r\n// .iframe-container {\r\n//   iframe {\r\n//     width: 100%;\r\n//     height: 100vh;\r\n//   }\r\n// }\r\n"
        }
    ]
}