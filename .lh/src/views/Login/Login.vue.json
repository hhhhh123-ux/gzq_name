{
    "sourceFile": "src/views/Login/Login.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1653969562679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1653969603682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,9 +161,9 @@\n             if (valid)\r\n               try {\r\n                 this.loading = true\r\n                 await login(this.loginForm).then((res) => {\r\n-                  \r\n+                  if(){}\r\n                   console.log(res.data.token)\r\n                   setToken(res.data.token);\r\n                   this.$router.push({name: \"Home\"})\r\n                 })\r\n"
                },
                {
                    "date": 1653969613250,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,9 +161,11 @@\n             if (valid)\r\n               try {\r\n                 this.loading = true\r\n                 await login(this.loginForm).then((res) => {\r\n-                  if(){}\r\n+                  if(res.code=='200'){\r\n+\r\n+                  }\r\n                   console.log(res.data.token)\r\n                   setToken(res.data.token);\r\n                   this.$router.push({name: \"Home\"})\r\n                 })\r\n"
                },
                {
                    "date": 1653969618980,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,13 +162,13 @@\n               try {\r\n                 this.loading = true\r\n                 await login(this.loginForm).then((res) => {\r\n                   if(res.code=='200'){\r\n-\r\n-                  }\r\n-                  console.log(res.data.token)\r\n+console.log(res.data.token)\r\n                   setToken(res.data.token);\r\n                   this.$router.push({name: \"Home\"})\r\n+                  }\r\n+                  \r\n                 })\r\n                 //await this.$router.push(this.handleRoute())\r\n \r\n               } finally {\r\n"
                },
                {
                    "date": 1653969625992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,189 +1,227 @@\n <template>\r\n-  <div v-loading=\"loading\" class=\"login-container\" element-loading-background=\"rgba(0, 0, 0, 0.6)\"\r\n-       element-loading-spinner=\"el-icon-loading\" element-loading-text=\"登录中...\">\r\n-\r\n-    <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" auto-complete=\"on\" class=\"login-form\"\r\n-             label-position=\"left\">\r\n+  <div\r\n+    v-loading=\"loading\"\r\n+    class=\"login-container\"\r\n+    element-loading-background=\"rgba(0, 0, 0, 0.6)\"\r\n+    element-loading-spinner=\"el-icon-loading\"\r\n+    element-loading-text=\"登录中...\"\r\n+  >\r\n+    <el-form\r\n+      ref=\"loginForm\"\r\n+      :model=\"loginForm\"\r\n+      :rules=\"loginRules\"\r\n+      auto-complete=\"on\"\r\n+      class=\"login-form\"\r\n+      label-position=\"left\"\r\n+    >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"@/assets/login_images/background.jpg\">\r\n+        <img alt=\"\" src=\"@/assets/login_images/background.jpg\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n       </div>\r\n \r\n       <el-form-item prop=\"username\">\r\n         <span class=\"svg-container\">\r\n-          <svg-icon icon-class=\"user\"/>\r\n+          <svg-icon icon-class=\"user\" />\r\n         </span>\r\n-        <el-input ref=\"username\" v-model=\"loginForm.username\" auto-complete=\"on\" name=\"username\" placeholder=\"Username\"\r\n-                  tabindex=\"1\" type=\"text\"/>\r\n+        <el-input\r\n+          ref=\"username\"\r\n+          v-model=\"loginForm.username\"\r\n+          auto-complete=\"on\"\r\n+          name=\"username\"\r\n+          placeholder=\"Username\"\r\n+          tabindex=\"1\"\r\n+          type=\"text\"\r\n+        />\r\n       </el-form-item>\r\n \r\n       <el-form-item prop=\"password\">\r\n         <span class=\"svg-container\">\r\n-          <svg-icon icon-class=\"password\"/>\r\n+          <svg-icon icon-class=\"password\" />\r\n         </span>\r\n-        <el-input :key=\"passwordType\" ref=\"password\" v-model=\"loginForm.password\" :type=\"passwordType\"\r\n-                  auto-complete=\"on\" name=\"password\" placeholder=\"Password\" tabindex=\"2\"\r\n-                  @keyup.enter.native=\"handleLogin\"/>\r\n+        <el-input\r\n+          :key=\"passwordType\"\r\n+          ref=\"password\"\r\n+          v-model=\"loginForm.password\"\r\n+          :type=\"passwordType\"\r\n+          auto-complete=\"on\"\r\n+          name=\"password\"\r\n+          placeholder=\"Password\"\r\n+          tabindex=\"2\"\r\n+          @keyup.enter.native=\"handleLogin\"\r\n+        />\r\n         <span class=\"show-pwd\" @click=\"showPwd\">\r\n-          <svg-icon :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"/>\r\n+          <svg-icon\r\n+            :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n+          />\r\n         </span>\r\n       </el-form-item>\r\n       <el-form-item v-if=\"captchaOnOff\" prop=\"code\">\r\n         <el-input\r\n-            v-model.trim=\"loginForm.code\"\r\n-            :placeholder=\"'验证码' + previewText\"\r\n-            tabindex=\"3\"\r\n-            type=\"text\"\r\n+          v-model.trim=\"loginForm.code\"\r\n+          :placeholder=\"'验证码' + previewText\"\r\n+          tabindex=\"3\"\r\n+          type=\"text\"\r\n         >\r\n           <template #prefix>\r\n-            <vab-icon icon=\"barcode-box-line\"/>\r\n+            <vab-icon icon=\"barcode-box-line\" />\r\n           </template>\r\n         </el-input>\r\n-        <el-image :src=\"codeUrl\" class=\"code\" @click=\"getCode\"/>\r\n+        <el-image :src=\"codeUrl\" class=\"code\" @click=\"getCode\" />\r\n       </el-form-item>\r\n       <div>\r\n-        <el-button style=\"width:100%;margin-bottom:20px;\" type=\"primary\" @click=\"handleLogin\">登录</el-button>\r\n+        <el-button\r\n+          style=\"width: 100%; margin-bottom: 20px\"\r\n+          type=\"primary\"\r\n+          @click=\"handleLogin\"\r\n+          >登录</el-button\r\n+        >\r\n       </div>\r\n       <div class=\"tips\">\r\n-        <span style=\"margin-right:20px;\">如果您还没有账号请先 <span style=\"color:#409EFF;cursor:pointer\"\r\n-                                                          @click=\"register\">注册</span></span>\r\n+        <span style=\"margin-right: 20px\"\r\n+          >如果您还没有账号请先\r\n+          <span style=\"color: #409eff; cursor: pointer\" @click=\"register\"\r\n+            >注册</span\r\n+          ></span\r\n+        >\r\n       </div>\r\n-\r\n     </el-form>\r\n   </div>\r\n </template>\r\n \r\n <script>\r\n // 引入去除空格工具\r\n-import {isBlank} from '@/utils/validate'\r\n-import {getCodeImg, login} from '@/api/system/user/user'\r\n-import {mapMutations} from 'vuex'\r\n-import {setToken} from \"@/utils/token\";\r\n-import {mapGetters} from 'vuex'\r\n+import { isBlank } from \"@/utils/validate\";\r\n+import { getCodeImg, login } from \"@/api/system/user/user\";\r\n+import { mapMutations } from \"vuex\";\r\n+import { setToken } from \"@/utils/token\";\r\n+import { mapGetters } from \"vuex\";\r\n \r\n export default {\r\n   // eslint-disable-next-line vue/multi-word-component-names\r\n-  name: 'Login',\r\n+  name: \"Login\",\r\n   computed: {\r\n     ...mapGetters({\r\n-      theme: 'settings/theme',\r\n-      extra: 'settings/extra',\r\n-      routes: 'routes/routes',\r\n-      token: 'user/token',\r\n-      visitedRoutes: 'tabs/visitedRoutes',\r\n+      theme: \"settings/theme\",\r\n+      extra: \"settings/extra\",\r\n+      routes: \"routes/routes\",\r\n+      token: \"user/token\",\r\n+      visitedRoutes: \"tabs/visitedRoutes\",\r\n     }),\r\n   },\r\n   data() {\r\n     const validateUsername = (rule, value, callback) => {\r\n       if (isBlank(value)) {\r\n-        callback(new Error('用户名不能为空！'))\r\n+        callback(new Error(\"用户名不能为空！\"));\r\n       } else {\r\n-        callback()\r\n+        callback();\r\n       }\r\n-    }\r\n+    };\r\n     const validatePassword = (rule, value, callback) => {\r\n       if (value.length < 6) {\r\n-        callback(new Error('密码最少为6位字符！'))\r\n+        callback(new Error(\"密码最少为6位字符！\"));\r\n       } else {\r\n-        callback()\r\n+        callback();\r\n       }\r\n-    }\r\n+    };\r\n     return {\r\n       // 头像状态\r\n       TxStatus: true,\r\n       loginForm: {\r\n-        username: '',\r\n-        password: '',\r\n+        username: \"\",\r\n+        password: \"\",\r\n         code: \"\",\r\n-        uuid: \"\"\r\n+        uuid: \"\",\r\n       },\r\n       // 登录规则\r\n       loginRules: {\r\n-        username: [{required: true, trigger: 'blur', validator: validateUsername}],\r\n-        password: [{required: true, trigger: 'blur', validator: validatePassword}]\r\n+        username: [\r\n+          { required: true, trigger: \"blur\", validator: validateUsername },\r\n+        ],\r\n+        password: [\r\n+          { required: true, trigger: \"blur\", validator: validatePassword },\r\n+        ],\r\n       },\r\n       // user: {\r\n       //   Authorization: ''\r\n       // },\r\n       loading: false,\r\n-      passwordType: 'password',\r\n+      passwordType: \"password\",\r\n       redirect: undefined,\r\n       captchaOnOff: true,\r\n-      previewText: '',\r\n-      codeUrl: '',\r\n-    }\r\n+      previewText: \"\",\r\n+      codeUrl: \"\",\r\n+    };\r\n   },\r\n   watch: {\r\n     $route: {\r\n       handler: function (route) {\r\n-        this.redirect = route.query && route.query.redirect\r\n+        this.redirect = route.query && route.query.redirect;\r\n       },\r\n-      immediate: true\r\n-    }\r\n+      immediate: true,\r\n+    },\r\n   },\r\n   created() {\r\n-    this.getCode()\r\n+    this.getCode();\r\n   },\r\n   methods: {\r\n-    ...mapMutations(['changeLogin']),\r\n+    ...mapMutations([\"changeLogin\"]),\r\n     showPwd() {\r\n-      if (this.passwordType === 'password') {\r\n-        this.passwordType = ''\r\n+      if (this.passwordType === \"password\") {\r\n+        this.passwordType = \"\";\r\n       } else {\r\n-        this.passwordType = 'password'\r\n+        this.passwordType = \"password\";\r\n       }\r\n       this.$nextTick(() => {\r\n-        this.$refs.password.focus()\r\n-      })\r\n+        this.$refs.password.focus();\r\n+      });\r\n     },\r\n     getCode() {\r\n       getCodeImg().then((res) => {\r\n         this.captchaOnOff =\r\n-            res.data.captchaOnOff === undefined ? true : res.data.captchaOnOff\r\n+          res.data.captchaOnOff === undefined ? true : res.data.captchaOnOff;\r\n         if (this.captchaOnOff) {\r\n-          this.codeUrl = 'data:image/gif;base64,' + res.data.code\r\n-          this.loginForm.uuid = res.data.uuid\r\n+          this.codeUrl = \"data:image/gif;base64,\" + res.data.code;\r\n+          this.loginForm.uuid = res.data.uuid;\r\n         }\r\n-      })\r\n+      });\r\n     },\r\n     handleRoute() {\r\n-      return this.redirect === '/404' || this.redirect === '/403'\r\n-          ? '/'\r\n-          : this.redirect\r\n+      return this.redirect === \"/404\" || this.redirect === \"/403\"\r\n+        ? \"/\"\r\n+        : this.redirect;\r\n     },\r\n     // 登录业务\r\n     handleLogin() {\r\n       this.$refs.loginForm.validate(async (valid) => {\r\n-            if (valid)\r\n-              try {\r\n-                this.loading = true\r\n-                await login(this.loginForm).then((res) => {\r\n-                  if(res.code=='200'){\r\n-console.log(res.data.token)\r\n-                  setToken(res.data.token);\r\n-                  this.$router.push({name: \"Home\"})\r\n-                  }\r\n-                  \r\n-                })\r\n-                //await this.$router.push(this.handleRoute())\r\n-\r\n-              } finally {\r\n-                this.loading = false\r\n+        if (valid)\r\n+          try {\r\n+            this.loading = true;\r\n+            await login(this.loginForm).then((res) => {\r\n+              if (res.code == \"200\") {\r\n+                console.log(res.data.token);\r\n+                setToken(res.data.token);\r\n+                this.$router.push({ name: \"Home\" });\r\n+              }else {\r\n+                \r\n               }\r\n+            });\r\n+            //await this.$router.push(this.handleRoute())\r\n+          } finally {\r\n+            this.loading = false;\r\n           }\r\n-      )\r\n+      });\r\n     },\r\n     // 注册业务\r\n     register() {\r\n-      this.$router.push({name: 'register'})\r\n-    }\r\n-  }\r\n-}\r\n+      this.$router.push({ name: \"register\" });\r\n+    },\r\n+  },\r\n+};\r\n </script>\r\n \r\n <style lang=\"scss\">\r\n $bg: #283443;\r\n@@ -262,9 +300,8 @@\n     max-width: 100%;\r\n     padding: 160px 35px 0;\r\n     margin: 0 auto;\r\n     overflow: hidden;\r\n-\r\n   }\r\n \r\n   .tips {\r\n     font-size: 18px;\r\n"
                },
                {
                    "date": 1653969638922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -205,9 +205,10 @@\n                 console.log(res.data.token);\r\n                 setToken(res.data.token);\r\n                 this.$router.push({ name: \"Home\" });\r\n               }else {\r\n-                \r\n+                resetRouter() // 调用router里的resetRouter方法重新匹配路由\r\n+      this.$router.replace(\"/\") // 重定向到首页\r\n               }\r\n             });\r\n             //await this.$router.push(this.handleRoute())\r\n           } finally {\r\n"
                },
                {
                    "date": 1653969648971,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -204,11 +204,11 @@\n               if (res.code == \"200\") {\r\n                 console.log(res.data.token);\r\n                 setToken(res.data.token);\r\n                 this.$router.push({ name: \"Home\" });\r\n-              }else {\r\n-                resetRouter() // 调用router里的resetRouter方法重新匹配路由\r\n-      this.$router.replace(\"/\") // 重定向到首页\r\n+              } else {\r\n+                resetRouter(); // 调用router里的resetRouter方法重新匹配路由\r\n+                this.$router.replace(\"/\"); // 重定向到首页\r\n               }\r\n             });\r\n             //await this.$router.push(this.handleRoute())\r\n           } finally {\r\n"
                },
                {
                    "date": 1653969660961,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,8 +98,9 @@\n import { getCodeImg, login } from \"@/api/system/user/user\";\r\n import { mapMutations } from \"vuex\";\r\n import { setToken } from \"@/utils/token\";\r\n import { mapGetters } from \"vuex\";\r\n+import \r\n \r\n export default {\r\n   // eslint-disable-next-line vue/multi-word-component-names\r\n   name: \"Login\",\r\n"
                },
                {
                    "date": 1653969724010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,10 +98,10 @@\n import { getCodeImg, login } from \"@/api/system/user/user\";\r\n import { mapMutations } from \"vuex\";\r\n import { setToken } from \"@/utils/token\";\r\n import { mapGetters } from \"vuex\";\r\n-import \r\n \r\n+\r\n export default {\r\n   // eslint-disable-next-line vue/multi-word-component-names\r\n   name: \"Login\",\r\n   computed: {\r\n"
                },
                {
                    "date": 1653977708477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,11 @@\n           tabindex=\"2\"\r\n           @keyup.enter.native=\"handleLogin\"\r\n         />\r\n         <span class=\"show-pwd\" @click=\"showPwd\">\r\n-          <svg-icon\r\n+          <!-- <svg-icon\r\n             :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n-          />\r\n+          /> -->\r\n         </span>\r\n       </el-form-item>\r\n       <el-form-item v-if=\"captchaOnOff\" prop=\"code\">\r\n         <el-input\r\n"
                },
                {
                    "date": 1653977723306,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,11 +53,11 @@\n           tabindex=\"2\"\r\n           @keyup.enter.native=\"handleLogin\"\r\n         />\r\n         <span class=\"show-pwd\" @click=\"showPwd\">\r\n-          <!-- <svg-icon\r\n+          <svg-icon\r\n             :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n-          /> -->\r\n+          />\r\n         </span>\r\n       </el-form-item>\r\n       <el-form-item v-if=\"captchaOnOff\" prop=\"code\">\r\n         <el-input\r\n"
                },
                {
                    "date": 1653977996805,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n <template>\r\n   <div\r\n     v-loading=\"loading\"\r\n     class=\"login-container\"\r\n+    class=\"iconfont\"\r\n     element-loading-background=\"rgba(0, 0, 0, 0.6)\"\r\n     element-loading-spinner=\"el-icon-loading\"\r\n     element-loading-text=\"登录中...\"\r\n   >\r\n"
                },
                {
                    "date": 1653978003131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n <template>\r\n   <div\r\n     v-loading=\"loading\"\r\n-    class=\"login-container\"\r\n+    \r\n     class=\"iconfont\"\r\n     element-loading-background=\"rgba(0, 0, 0, 0.6)\"\r\n     element-loading-spinner=\"el-icon-loading\"\r\n     element-loading-text=\"登录中...\"\r\n"
                },
                {
                    "date": 1653978038977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n <template>\r\n   <div\r\n     v-loading=\"loading\"\r\n+    class=\"login-container\"\r\n     \r\n-    class=\"iconfont\"\r\n     element-loading-background=\"rgba(0, 0, 0, 0.6)\"\r\n     element-loading-spinner=\"el-icon-loading\"\r\n     element-loading-text=\"登录中...\"\r\n   >\r\n"
                },
                {
                    "date": 1653980215679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n <template>\r\n   <div\r\n     v-loading=\"loading\"\r\n     class=\"login-container\"\r\n-    \r\n     element-loading-background=\"rgba(0, 0, 0, 0.6)\"\r\n     element-loading-spinner=\"el-icon-loading\"\r\n     element-loading-text=\"登录中...\"\r\n   >\r\n@@ -16,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"@/assets/login_images/background.jpg\" />\r\n+        <img alt=\"\" src=\"/@/assets/login_images/background.jpg\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                },
                {
                    "date": 1653980229324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"/@/assets/login_images/background.jpg\" />\r\n+        <img alt=\"\" src=\"..\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                },
                {
                    "date": 1653980235745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"..\" />\r\n+        <img alt=\"\" src=\"@\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                },
                {
                    "date": 1653980240893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"@\" />\r\n+        <img alt=\"\" src=\"@/a\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                },
                {
                    "date": 1653980249538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"@/a\" />\r\n+        <img alt=\"\" src=\"@/assets/login_images/background.jpg\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                },
                {
                    "date": 1653980281235,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"@/assets/login_images/background.jpg\" />\r\n+        <img alt=\"\" src=\"@/assets/logo\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                },
                {
                    "date": 1653980336094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"require@/assets/logo.png\" />\r\n+        <img alt=\"\" src=\"require(@/assets/logo.png\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                },
                {
                    "date": 1653980534156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n       label-position=\"left\"\r\n     >\r\n       <!-- 头像区域 -->\r\n       <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n-        <img alt=\"\" src=\"@/assets/l\" />\r\n+        <img alt=\"\" src=\"@/assets/lo\" />\r\n       </div>\r\n \r\n       <div class=\"title-container\">\r\n         <h3 class=\"title\">后台管理系统</h3>\r\n"
                }
            ],
            "date": 1653969562679,
            "name": "Commit-0",
            "content": "<template>\r\n  <div v-loading=\"loading\" class=\"login-container\" element-loading-background=\"rgba(0, 0, 0, 0.6)\"\r\n       element-loading-spinner=\"el-icon-loading\" element-loading-text=\"登录中...\">\r\n\r\n    <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" auto-complete=\"on\" class=\"login-form\"\r\n             label-position=\"left\">\r\n      <!-- 头像区域 -->\r\n      <div v-if=\"TxStatus\" class=\"avatar-box\">\r\n        <img alt=\"\" src=\"@/assets/login_images/background.jpg\">\r\n      </div>\r\n\r\n      <div class=\"title-container\">\r\n        <h3 class=\"title\">后台管理系统</h3>\r\n      </div>\r\n\r\n      <el-form-item prop=\"username\">\r\n        <span class=\"svg-container\">\r\n          <svg-icon icon-class=\"user\"/>\r\n        </span>\r\n        <el-input ref=\"username\" v-model=\"loginForm.username\" auto-complete=\"on\" name=\"username\" placeholder=\"Username\"\r\n                  tabindex=\"1\" type=\"text\"/>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"password\">\r\n        <span class=\"svg-container\">\r\n          <svg-icon icon-class=\"password\"/>\r\n        </span>\r\n        <el-input :key=\"passwordType\" ref=\"password\" v-model=\"loginForm.password\" :type=\"passwordType\"\r\n                  auto-complete=\"on\" name=\"password\" placeholder=\"Password\" tabindex=\"2\"\r\n                  @keyup.enter.native=\"handleLogin\"/>\r\n        <span class=\"show-pwd\" @click=\"showPwd\">\r\n          <svg-icon :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"/>\r\n        </span>\r\n      </el-form-item>\r\n      <el-form-item v-if=\"captchaOnOff\" prop=\"code\">\r\n        <el-input\r\n            v-model.trim=\"loginForm.code\"\r\n            :placeholder=\"'验证码' + previewText\"\r\n            tabindex=\"3\"\r\n            type=\"text\"\r\n        >\r\n          <template #prefix>\r\n            <vab-icon icon=\"barcode-box-line\"/>\r\n          </template>\r\n        </el-input>\r\n        <el-image :src=\"codeUrl\" class=\"code\" @click=\"getCode\"/>\r\n      </el-form-item>\r\n      <div>\r\n        <el-button style=\"width:100%;margin-bottom:20px;\" type=\"primary\" @click=\"handleLogin\">登录</el-button>\r\n      </div>\r\n      <div class=\"tips\">\r\n        <span style=\"margin-right:20px;\">如果您还没有账号请先 <span style=\"color:#409EFF;cursor:pointer\"\r\n                                                          @click=\"register\">注册</span></span>\r\n      </div>\r\n\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 引入去除空格工具\r\nimport {isBlank} from '@/utils/validate'\r\nimport {getCodeImg, login} from '@/api/system/user/user'\r\nimport {mapMutations} from 'vuex'\r\nimport {setToken} from \"@/utils/token\";\r\nimport {mapGetters} from 'vuex'\r\n\r\nexport default {\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: 'Login',\r\n  computed: {\r\n    ...mapGetters({\r\n      theme: 'settings/theme',\r\n      extra: 'settings/extra',\r\n      routes: 'routes/routes',\r\n      token: 'user/token',\r\n      visitedRoutes: 'tabs/visitedRoutes',\r\n    }),\r\n  },\r\n  data() {\r\n    const validateUsername = (rule, value, callback) => {\r\n      if (isBlank(value)) {\r\n        callback(new Error('用户名不能为空！'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const validatePassword = (rule, value, callback) => {\r\n      if (value.length < 6) {\r\n        callback(new Error('密码最少为6位字符！'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      // 头像状态\r\n      TxStatus: true,\r\n      loginForm: {\r\n        username: '',\r\n        password: '',\r\n        code: \"\",\r\n        uuid: \"\"\r\n      },\r\n      // 登录规则\r\n      loginRules: {\r\n        username: [{required: true, trigger: 'blur', validator: validateUsername}],\r\n        password: [{required: true, trigger: 'blur', validator: validatePassword}]\r\n      },\r\n      // user: {\r\n      //   Authorization: ''\r\n      // },\r\n      loading: false,\r\n      passwordType: 'password',\r\n      redirect: undefined,\r\n      captchaOnOff: true,\r\n      previewText: '',\r\n      codeUrl: '',\r\n    }\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler: function (route) {\r\n        this.redirect = route.query && route.query.redirect\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getCode()\r\n  },\r\n  methods: {\r\n    ...mapMutations(['changeLogin']),\r\n    showPwd() {\r\n      if (this.passwordType === 'password') {\r\n        this.passwordType = ''\r\n      } else {\r\n        this.passwordType = 'password'\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.password.focus()\r\n      })\r\n    },\r\n    getCode() {\r\n      getCodeImg().then((res) => {\r\n        this.captchaOnOff =\r\n            res.data.captchaOnOff === undefined ? true : res.data.captchaOnOff\r\n        if (this.captchaOnOff) {\r\n          this.codeUrl = 'data:image/gif;base64,' + res.data.code\r\n          this.loginForm.uuid = res.data.uuid\r\n        }\r\n      })\r\n    },\r\n    handleRoute() {\r\n      return this.redirect === '/404' || this.redirect === '/403'\r\n          ? '/'\r\n          : this.redirect\r\n    },\r\n    // 登录业务\r\n    handleLogin() {\r\n      this.$refs.loginForm.validate(async (valid) => {\r\n            if (valid)\r\n              try {\r\n                this.loading = true\r\n                await login(this.loginForm).then((res) => {\r\n                  \r\n                  console.log(res.data.token)\r\n                  setToken(res.data.token);\r\n                  this.$router.push({name: \"Home\"})\r\n                })\r\n                //await this.$router.push(this.handleRoute())\r\n\r\n              } finally {\r\n                this.loading = false\r\n              }\r\n          }\r\n      )\r\n    },\r\n    // 注册业务\r\n    register() {\r\n      this.$router.push({name: 'register'})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n$bg: #283443;\r\n$light_gray: #fff;\r\n$cursor: #fff;\r\n@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\r\n  .login-container .el-input input {\r\n    color: $cursor;\r\n  }\r\n}\r\n\r\n.login-container {\r\n  .el-input {\r\n    display: inline-block;\r\n    height: 47px;\r\n    width: 85%;\r\n\r\n    input {\r\n      background: transparent;\r\n      border: 0px;\r\n      -webkit-appearance: none;\r\n      border-radius: 0px;\r\n      padding: 12px 5px 12px 15px;\r\n      color: $light_gray;\r\n      height: 47px;\r\n      caret-color: $cursor;\r\n\r\n      &:-webkit-autofill {\r\n        box-shadow: 0 0 0px 1000px $bg inset !important;\r\n        -webkit-text-fill-color: $cursor !important;\r\n      }\r\n    }\r\n  }\r\n\r\n  .el-form-item {\r\n    border: 1px solid rgba(255, 255, 255, 0.1);\r\n    background: rgba(0, 0, 0, 0.1);\r\n    border-radius: 5px;\r\n    color: #454545;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n$bg: #2d3a4b;\r\n$dark_gray: #889aa4;\r\n$light_gray: #eee;\r\n\r\n.login-container {\r\n  min-height: 100%;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  background: url(~@/assets/login_images/background.jpg);\r\n  background-size: 100% 100%;\r\n  // 头像\r\n  .avatar-box {\r\n    margin: 0 auto;\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n    border: 1px solid #409eff;\r\n    box-shadow: 0 0 10px #409eff;\r\n    position: relative;\r\n    bottom: 20px;\r\n\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n      border-radius: 50%;\r\n    }\r\n  }\r\n\r\n  .login-form {\r\n    position: relative;\r\n    width: 520px;\r\n    max-width: 100%;\r\n    padding: 160px 35px 0;\r\n    margin: 0 auto;\r\n    overflow: hidden;\r\n\r\n  }\r\n\r\n  .tips {\r\n    font-size: 18px;\r\n    text-align: center;\r\n    color: #000;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .svg-container {\r\n    padding: 6px 5px 6px 15px;\r\n    color: $dark_gray;\r\n    vertical-align: middle;\r\n    width: 30px;\r\n    display: inline-block;\r\n  }\r\n\r\n  .title-container {\r\n    position: relative;\r\n\r\n    .title {\r\n      font-size: 30px;\r\n      color: $light_gray;\r\n      margin: 0px auto 40px auto;\r\n      text-align: center;\r\n      font-weight: 500;\r\n    }\r\n  }\r\n\r\n  .show-pwd {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 7px;\r\n    font-size: 16px;\r\n    color: $dark_gray;\r\n    cursor: pointer;\r\n    user-select: none;\r\n  }\r\n}\r\n</style>"
        }
    ]
}